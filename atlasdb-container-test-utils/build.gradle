apply plugin: 'org.inferred.processors'

apply from: "${rootProject.projectDir}/gradle/shared.gradle"

dependencies {
    compile project(':atlasdb-api')
    compile(project(':atlasdb-cassandra')) {
        exclude(module:'log4j-over-slf4j')
        exclude(module:'jcl-over-slf4j')
        exclude(module:'json-simple')
        exclude(module:'metrics-core')
        exclude(module:'logback-core')
        exclude(module:'logback-classic')
        exclude(module:'joda-time')
        exclude(module:'snakeyaml')
        exclude(module:'hibernate-validator')
        exclude(module:'libthrift')
        exclude(module:'commons-cli')
        exclude(module:'jna')
    }
    compile project(':atlasdb-docker-test-utils')

    compile group: 'com.google.guava', name: 'guava', version: libVersions.guava
    compile group: 'com.palantir.docker.compose', name: 'docker-compose-rule', version: libVersions.dockerComposeRule

    processor group: 'org.immutables', name: 'value', version: libVersions.immutables

    testCompile group: 'org.assertj', name: 'assertj-core', version: libVersions.assertj
    testCompile group: 'org.mockito', name: 'mockito-core', version: libVersions.mockito
}

configurations.matching({ it.name in ['compile', 'runtime'] }).all {
    resolutionStrategy {
        force 'org.apache.commons:commons-lang3:' + libVersions.commons_lang3
    }
}
